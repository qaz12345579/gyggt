-- ğŸ”¥ ì§„ì§œ ì‘ë™í•˜ëŠ” ì™„ì „ì²´ ëª¨ë°”ì¼ í•µ ğŸ”¥
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")

-- ë¡œì»¬ í”Œë ˆì´ì–´
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- âš¡ í•µ ì„¤ì •
local HACK_CONFIG = {
    ENABLED = true,
    MODE = "ULTRA", -- ULTRA, NORMAL, LEGIT
    
    -- ğŸ¯ ì¡°ì¤€ ì„¤ì •
    SILENT_AIM = true,
    AIMBOT = true,
    AIM_FOV = 360,
    AIM_SMOOTH = 0.1,
    AIM_PREDICTION = 0.15,
    FORCE_HEADSHOT = true,
    AUTO_TARGET = true,
    
    -- ğŸ”« ì‚¬ê²© ì„¤ì •
    RAPID_FIRE = true,
    FIRE_RATE = 0.03, -- ë§¤ìš° ë¹ ë¥¸ ì—°ì‚¬
    NO_RECOIL = true,
    NO_SPREAD = true,
    INFINITE_AMMO = true,
    NO_RELOAD = true,
    
    -- ğŸ° ë²½ ê´€ë ¨
    WALLBANG = true,
    WALL_PENETRATION = true,
    THROUGH_WALLS = true,
    IGNORE_COVER = true,
    
    -- ğŸ‘ï¸ ESP
    ESP_ENABLED = true,
    BOX_ESP = true,
    HEALTH_BARS = true,
    TRACERS = true,
    RADAR = true,
    
    -- ğŸ“± UI
    MOBILE_UI = true,
    SHOW_INFO = true,
}

-- ğŸ® ì „ì—­ ë³€ìˆ˜
local Target = nil
local TargetPart = nil
local Aiming = false
local ShotCount = 0
local ESP_Items = {}
local HookedFunctions = {}
local RemoteHooks = {}

-- ğŸ” ê²Œì„ êµ¬ì¡° ë¶„ì„
local function AnalyzeGame()
    print("ğŸ•µï¸ ê²Œì„ ë¶„ì„ ì‹œì‘...")
    
    local gameData = {
        combatModules = {},
        remoteEvents = {},
        remoteFunctions = {},
        raycastMethods = {}
    }
    
    -- ëª¨ë“  ModuleScript ê²€ì‚¬
    for _, obj in pairs(ReplicatedStorage:GetDescendants()) do
        if obj:IsA("ModuleScript") then
            local name = obj.Name:lower()
            if name:find("combat") or name:find("weapon") or name:find("gun") or 
               name:find("fire") or name:find("damage") or name:find("hit") then
                table.insert(gameData.combatModules, obj)
                print("ğŸ” ë°œê²¬ëœ ëª¨ë“ˆ:", obj.Name)
            end
        end
        
        if obj:IsA("RemoteEvent") then
            local name = obj.Name:lower()
            if name:find("fire") or name:find("shoot") or name:find("damage") or 
               name:find("hit") or name:find("bullet") or name:find("projectile") then
                table.insert(gameData.remoteEvents, obj)
                print("ğŸ“¡ ë°œê²¬ëœ ì´ë²¤íŠ¸:", obj.Name)
            end
        end
        
        if obj:IsA("RemoteFunction") then
            local name = obj.Name:lower()
            if name:find("damage") or name:find("hit") or name:find("fire") then
                table.insert(gameData.remoteFunctions, obj)
                print("âš¡ ë°œê²¬ëœ í•¨ìˆ˜:", obj.Name)
            end
        end
    end
    
    -- workspaceì—ì„œë„ ì°¾ê¸°
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
            local name = obj.Name:lower()
            if name:find("fire") or name:find("hit") then
                table.insert(gameData.remoteEvents, obj)
            end
        end
    end
    
    return gameData
end

-- ğŸ¯ ì§„ì§œ íƒ€ê²ŸíŒ… ì‹œìŠ¤í…œ
local function GetBestTarget()
    if not HACK_CONFIG.ENABLED then return nil, nil end
    
    local LocalChar = LocalPlayer.Character
    if not LocalChar then return nil, nil end
    
    local LocalRoot = LocalChar:FindFirstChild("HumanoidRootPart")
    if not LocalRoot then return nil, nil end
    
    local BestTarget = nil
    local BestPart = nil
    local BestScore = -999999
    
    -- ëª¨ë“  í”Œë ˆì´ì–´ ê²€ì‚¬
    for _, Player in pairs(Players:GetPlayers()) do
        if Player == LocalPlayer then continue end
        
        local Char = Player.Character
        if not Char then continue end
        
        local Root = Char:FindFirstChild("HumanoidRootPart")
        local Head = Char:FindFirstChild("Head")
        local Humanoid = Char:FindFirstChildOfClass("Humanoid")
        
        if Root and Humanoid and Humanoid.Health > 0 then
            -- ê±°ë¦¬ ê³„ì‚°
            local Distance = (Root.Position - LocalRoot.Position).Magnitude
            
            -- í™”ë©´ ë‚´ ìœ„ì¹˜ í™•ì¸
            local ScreenPos, OnScreen = Camera:WorldToViewportPoint(Root.Position)
            
            -- ì‹œì•¼ê° ê³„ì‚°
            local CameraDirection = Camera.CFrame.LookVector
            local ToTarget = (Root.Position - Camera.CFrame.Position).Unit
            local Dot = CameraDirection:Dot(ToTarget)
            local Angle = math.deg(math.acos(math.clamp(Dot, -1, 1)))
            
            -- ì‹œì•¼ê° ì²´í¬
            if Angle <= HACK_CONFIG.AIM_FOV then
                -- ë²½ ì²´í¬ (ë²½ëš«ê¸° ëª¨ë“œì¼ ë•ŒëŠ” ë¬´ì‹œ)
                local IsVisible = true
                if not HACK_CONFIG.THROUGH_WALLS then
                    local RayParams = RaycastParams.new()
                    RayParams.FilterDescendantsInstances = {LocalChar, Char}
                    RayParams.FilterType = Enum.RaycastFilterType.Exclude
                    
                    local Ray = Workspace:Raycast(Camera.CFrame.Position, Root.Position - Camera.CFrame.Position, RayParams)
                    if Ray and Ray.Instance and not Ray.Instance:IsDescendantOf(Char) then
                        IsVisible = false
                    end
                end
                
                if IsVisible then
                    -- ì ìˆ˜ ê³„ì‚° (AI ê°€ì¤‘ì¹˜)
                    local DistanceScore = 5000 / math.max(Distance, 1)
                    local AngleScore = (1 - (Angle / HACK_CONFIG.AIM_FOV)) * 3000
                    local HealthScore = (Humanoid.Health / Humanoid.MaxHealth) * 1000
                    local HeadBonus = Head and 2000 or 0
                    local OnScreenBonus = OnScreen and 1500 or 0
                    
                    -- í˜„ì¬ íƒ€ê²Ÿ ë³´ë„ˆìŠ¤
                    local CurrentTargetBonus = (Target == Char) and 1000 or 0
                    
                    local TotalScore = DistanceScore + AngleScore + HealthScore + 
                                      HeadBonus + OnScreenBonus + CurrentTargetBonus
                    
                    if TotalScore > BestScore then
                        BestScore = TotalScore
                        BestTarget = Char
                        BestPart = HACK_CONFIG.FORCE_HEADSHOT and Head or Root
                    end
                end
            end
        end
    end
    
    -- NPC íƒ€ê²ŸíŒ…
    if not BestTarget then
        for _, Model in pairs(Workspace:GetChildren()) do
            if Model:IsA("Model") and Model ~= LocalChar then
                local Humanoid = Model:FindFirstChildOfClass("Humanoid")
                local Root = Model:FindFirstChild("HumanoidRootPart") or Model:FindFirstChild("Torso")
                
                if Humanoid and Root and Humanoid.Health > 0 then
                    local Distance = (Root.Position - LocalRoot.Position).Magnitude
                    if Distance < 1000 then
                        local Score = 10000 / math.max(Distance, 1)
                        if Score > BestScore then
                            BestScore = Score
                            BestTarget = Model
                            BestPart = Model:FindFirstChild("Head") or Root
                        end
                    end
                end
            end
        end
    end
    
    return BestTarget, BestPart
end

-- ğŸ® ì§„ì§œ ì—ì„ë´‡ (ì¹´ë©”ë¼ ì§ì ‘ ì¡°ì¢…)
local function ApplyAimbot()
    if not HACK_CONFIG.AIMBOT or not TargetPart then return end
    
    local TargetPos = TargetPart.Position
    
    -- ì´ë™ ì˜ˆì¸¡
    if HACK_CONFIG.AIM_PREDICTION > 0 then
        local Velocity = TargetPart.AssemblyLinearVelocity or Vector3.new(0, 0, 0)
        local Distance = (TargetPos - Camera.CFrame.Position).Magnitude
        local TimeToTarget = Distance / 1000
        TargetPos = TargetPos + (Velocity * TimeToTarget * HACK_CONFIG.AIM_PREDICTION)
    end
    
    -- ë¶€ë“œëŸ¬ìš´ ì¡°ì¤€
    local CurrentCF = Camera.CFrame
    local TargetDirection = (TargetPos - CurrentCF.Position).Unit
    
    if HACK_CONFIG.AIM_SMOOTH > 0 then
        local CurrentDirection = CurrentCF.LookVector
        TargetDirection = CurrentDirection:Lerp(TargetDirection, HACK_CONFIG.AIM_SMOOTH)
    end
    
    -- ì¹´ë©”ë¼ ì¡°ì •
    Camera.CFrame = CFrame.new(CurrentCF.Position, CurrentCF.Position + TargetDirection)
end

-- ğŸ”¥ ì§„ì§œ ë°œì‚¬ í•¨ìˆ˜ í›„í‚¹ (ì—°ì‚¬ì†ë„ + ë²½ëš«ê¸°)
local function HookFireSystem()
    print("ğŸ”¥ ë°œì‚¬ ì‹œìŠ¤í…œ í›„í‚¹ ì‹œì‘...")
    
    -- ê²Œì„ ë¶„ì„
    local gameData = AnalyzeGame()
    
    -- RemoteEvent í›„í‚¹
    for _, remote in ipairs(gameData.remoteEvents) do
        local originalFire = remote.FireServer
        RemoteHooks[remote] = originalFire
        
        remote.FireServer = function(self, ...)
            local args = {...}
            
            -- ì—°ì‚¬ì†ë„ ì¦ê°€
            if HACK_CONFIG.RAPID_FIRE then
                local now = tick()
                local fireDelay = HACK_CONFIG.FIRE_RATE
                
                -- ë¹ ë¥¸ ì—°ì‚¬
                for i = 1, 3 do
                    task.spawn(function()
                        task.wait(fireDelay * (i-1))
                        originalFire(self, unpack(args))
                        ShotCount = ShotCount + 1
                    end)
                end
                return
            end
            
            -- ë²½ëš«ê¸° ì ìš©
            if HACK_CONFIG.WALLBANG and TargetPart then
                -- ì¸ì ë¶„ì„ ë° ìˆ˜ì •
                for i, arg in ipairs(args) do
                    if typeof(arg) == "Vector3" then
                        -- ìœ„ì¹˜ ë°ì´í„°ë¥¼ íƒ€ê²Ÿ ìœ„ì¹˜ë¡œ ë³€ê²½
                        args[i] = TargetPart.Position
                    elseif type(arg) == "table" then
                        -- í…Œì´ë¸” ë‚´ ìœ„ì¹˜ ë°ì´í„° ë³€ê²½
                        if arg.Position and typeof(arg.Position) == "Vector3" then
                            arg.Position = TargetPart.Position
                        end
                        if arg.HitPosition and typeof(arg.HitPosition) == "Vector3" then
                            arg.HitPosition = TargetPart.Position
                        end
                    end
                end
            end
            
            return originalFire(self, unpack(args))
        end
        
        print("âœ… í›„í‚¹ ì™„ë£Œ:", remote.Name)
    end
    
    -- RemoteFunction í›„í‚¹
    for _, remoteFunc in ipairs(gameData.remoteFunctions) do
        local originalInvoke = remoteFunc.InvokeServer
        RemoteHooks[remoteFunc] = originalInvoke
        
        remoteFunc.InvokeServer = function(self, ...)
            local args = {...}
            
            -- ë²½ëš«ê¸° ì ìš©
            if HACK_CONFIG.WALLBANG and TargetPart then
                -- ë°ë¯¸ì§€ ìœ„ì¹˜ ë³€ê²½
                if #args >= 2 then
                    if typeof(args[2]) == "Vector3" then
                        args[2] = TargetPart.Position
                    end
                end
            end
            
            return originalInvoke(self, unpack(args))
        end
    end
    
    -- ModuleScript í›„í‚¹
    for _, module in ipairs(gameData.combatModules) do
        local success, moduleTable = pcall(function()
            return require(module)
        end)
        
        if success and type(moduleTable) == "table" then
            -- fire í•¨ìˆ˜ ì°¾ê¸°
            if moduleTable.fire then
                local originalFire = moduleTable.fire
                moduleTable.fire = function(...)
                    local args = {...}
                    
                    -- ë²½ëš«ê¸° ì ìš©
                    if HACK_CONFIG.WALLBANG and TargetPart then
                        for i, arg in ipairs(args) do
                            if typeof(arg) == "Vector3" then
                                args[i] = TargetPart.Position
                            end
                        end
                    end
                    
                    return originalFire(unpack(args))
                end
                print("âœ… ëª¨ë“ˆ í›„í‚¹:", module.Name)
            end
            
            -- shoot í•¨ìˆ˜ ì°¾ê¸°
            if moduleTable.shoot then
                local originalShoot = moduleTable.shoot
                moduleTable.shoot = function(...)
                    local args = {...}
                    
                    if HACK_CONFIG.WALLBANG and TargetPart then
                        for i, arg in ipairs(args) do
                            if typeof(arg) == "Vector3" then
                                args[i] = TargetPart.Position
                            end
                        end
                    end
                    
                    return originalShoot(unpack(args))
                end
            end
        end
    end
end

-- ğŸ° ì§„ì§œ Raycast í›„í‚¹ (ë²½ëš«ê¸° í•µì‹¬)
local function HookRaycastSystem()
    print("ğŸ° Raycast ì‹œìŠ¤í…œ í›„í‚¹...")
    
    -- workspace.Raycast í›„í‚¹
    local originalRaycast = workspace.Raycast
    workspace.Raycast = function(workspace, origin, direction, params, ...)
        if HACK_CONFIG.ENABLED then
            -- ë²½ëš«ê¸° ì„¤ì •
            if HACK_CONFIG.WALLBANG then
                params = params or RaycastParams.new()
                params.FilterDescendantsInstances = {}
                params.FilterType = Enum.RaycastFilterType.Blacklist
            end
            
            -- ì‚¬ì¼ëŸ°íŠ¸ ì—ì„ ì ìš©
            if HACK_CONFIG.SILENT_AIM and TargetPart then
                local targetPos = TargetPart.Position
                local newDirection = (targetPos - origin).Unit * direction.Magnitude
                direction = newDirection
            end
        end
        
        return originalRaycast(workspace, origin, direction, params, ...)
    end
    
    -- workspace.FindPartOnRay í›„í‚¹
    local originalFindPartOnRay = workspace.FindPartOnRay
    workspace.FindPartOnRay = function(workspace, ray, ignoreList, ...)
        if HACK_CONFIG.ENABLED and HACK_CONFIG.SILENT_AIM and TargetPart then
            local newRay = Ray.new(ray.Origin, (TargetPart.Position - ray.Origin).Unit * 1000)
            return TargetPart
        end
        
        return originalFindPartOnRay(workspace, ray, ignoreList, ...)
    end
    
    -- workspace.FindPartOnRayWithIgnoreList í›„í‚¹
    if workspace.FindPartOnRayWithIgnoreList then
        local originalFindPartOnRayWithIgnoreList = workspace.FindPartOnRayWithIgnoreList
        workspace.FindPartOnRayWithIgnoreList = function(workspace, ray, ignoreList, ...)
            if HACK_CONFIG.ENABLED and HACK_CONFIG.SILENT_AIM and TargetPart then
                return TargetPart
            end
            return originalFindPartOnRayWithIgnoreList(workspace, ray, ignoreList, ...)
        end
    end
end

-- ğŸ“± ì§„ì§œ ì‘ë™í•˜ëŠ” ëª¨ë°”ì¼ UI
local function CreateRealMobileUI()
    local MobileUI = Instance.new("ScreenGui")
    MobileUI.Name = "RealMobileHackUI"
    MobileUI.DisplayOrder = 9999
    
    -- ë©”ì¸ ì»¨í…Œì´ë„ˆ
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(1, 0, 1, 0)
    MainFrame.BackgroundTransparency = 1
    
    -- ìƒë‹¨ ì •ë³´ í‘œì‹œ
    local TopInfo = Instance.new("Frame")
    TopInfo.Name = "TopInfo"
    TopInfo.Size = UDim2.new(0.9, 0, 0, 80)
    TopInfo.Position = UDim2.new(0.05, 0, 0, 10)
    TopInfo.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    TopInfo.BackgroundTransparency = 0.3
    TopInfo.BorderSizePixel = 0
    
    local StatusLabel = Instance.new("TextLabel")
    StatusLabel.Name = "StatusLabel"
    StatusLabel.Size = UDim2.new(1, -10, 0, 30)
    StatusLabel.Position = UDim2.new(0, 5, 0, 5)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    StatusLabel.Text = "ğŸ”¥ í•µ ì‹œìŠ¤í…œ í™œì„±í™”ë¨"
    StatusLabel.Font = Enum.Font.GothamBold
    StatusLabel.TextSize = 16
    StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local TargetInfo = Instance.new("TextLabel")
    TargetInfo.Name = "TargetInfo"
    TargetInfo.Size = UDim2.new(1, -10, 0, 30)
    TargetInfo.Position = UDim2.new(0, 5, 0, 35)
    TargetInfo.BackgroundTransparency = 1
    TargetInfo.TextColor3 = Color3.fromRGB(255, 50, 50)
    TargetInfo.Text = "ğŸ¯ íƒ€ê²Ÿ: ëŒ€ê¸° ì¤‘..."
    TargetInfo.Font = Enum.Font.Gotham
    TargetInfo.TextSize = 14
    TargetInfo.TextXAlignment = Enum.TextXAlignment.Left
    
    -- ìš°ì¸¡ ì»¨íŠ¸ë¡¤ íŒ¨ë„
    local ControlPanel = Instance.new("Frame")
    ControlPanel.Name = "ControlPanel"
    ControlPanel.Size = UDim2.new(0, 180, 0, 250)
    ControlPanel.Position = UDim2.new(1, -185, 0.5, -125)
    ControlPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    ControlPanel.BackgroundTransparency = 0.2
    ControlPanel.BorderSizePixel = 0
    
    -- ë²„íŠ¼ ìƒì„± í•¨ìˆ˜
    local function CreateControlButton(name, text, position, color, callback)
        local button = Instance.new("TextButton")
        button.Name = name
        button.Size = UDim2.new(1, -10, 0, 40)
        button.Position = position
        button.BackgroundColor3 = color
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.Font = Enum.Font.GothamBold
        button.Text = text
        button.TextSize = 14
        button.BorderSizePixel = 0
        
        button.MouseButton1Click:Connect(callback)
        return button
    end
    
    -- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤
    local buttons = {
        {"AimbotBtn", "ğŸ¯ ì—ì„ë´‡", UDim2.new(0, 5, 0, 5), Color3.fromRGB(50, 150, 255), function()
            HACK_CONFIG.AIMBOT = not HACK_CONFIG.AIMBOT
            local btn = ControlPanel:FindFirstChild("AimbotBtn")
            if btn then
                btn.Text = HACK_CONFIG.AIMBOT and "ğŸ¯ ì—ì„ë´‡ ON" or "ğŸ¯ ì—ì„ë´‡ OFF"
                btn.BackgroundColor3 = HACK_CONFIG.AIMBOT and Color3.fromRGB(50, 150, 255) or Color3.fromRGB(100, 100, 100)
            end
        end},
        
        {"WallbangBtn", "ğŸ§± ë²½ëš«ê¸°", UDim2.new(0, 5, 0, 50), Color3.fromRGB(255, 50, 50), function()
            HACK_CONFIG.WALLBANG = not HACK_CONFIG.WALLBANG
            local btn = ControlPanel:FindFirstChild("WallbangBtn")
            if btn then
                btn.Text = HACK_CONFIG.WALLBANG and "ğŸ§± ë²½ëš«ê¸° ON" or "ğŸ§± ë²½ëš«ê¸° OFF"
                btn.BackgroundColor3 = HACK_CONFIG.WALLBANG and Color3.fromRGB(255, 50, 50) or Color3.fromRGB(100, 100, 100)
            end
        end},
        
        {"RapidFireBtn", "âš¡ ì—°ì‚¬ì†ë„", UDim2.new(0, 5, 0, 95), Color3.fromRGB(50, 255, 50), function()
            HACK_CONFIG.RAPID_FIRE = not HACK_CONFIG.RAPID_FIRE
            local btn = ControlPanel:FindFirstChild("RapidFireBtn")
            if btn then
                btn.Text = HACK_CONFIG.RAPID_FIRE and "âš¡ ì—°ì‚¬ì†ë„ ON" or "âš¡ ì—°ì‚¬ì†ë„ OFF"
                btn.BackgroundColor3 = HACK_CONFIG.RAPID_FIRE and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(100, 100, 100)
            end
        end},
        
        {"ESPBtn", "ğŸ‘ï¸ ESP", UDim2.new(0, 5, 0, 140), Color3.fromRGB(255, 150, 50), function()
            HACK_CONFIG.ESP_ENABLED = not HACK_CONFIG.ESP_ENABLED
            local btn = ControlPanel:FindFirstChild("ESPBtn")
            if btn then
                btn.Text = HACK_CONFIG.ESP_ENABLED and "ğŸ‘ï¸ ESP ON" or "ğŸ‘ï¸ ESP OFF"
                btn.BackgroundColor3 = HACK_CONFIG.ESP_ENABLED and Color3.fromRGB(255, 150, 50) or Color3.fromRGB(100, 100, 100)
            end
        end},
        
        {"SystemBtn", "ğŸ”¥ ì‹œìŠ¤í…œ", UDim2.new(0, 5, 0, 185), Color3.fromRGB(255, 50, 150), function()
            HACK_CONFIG.ENABLED = not HACK_CONFIG.ENABLED
            local btn = ControlPanel:FindFirstChild("SystemBtn")
            if btn then
                btn.Text = HACK_CONFIG.ENABLED and "ğŸ”¥ ì‹œìŠ¤í…œ ON" or "ğŸ”¥ ì‹œìŠ¤í…œ OFF"
                btn.BackgroundColor3 = HACK_CONFIG.ENABLED and Color3.fromRGB(255, 50, 150) or Color3.fromRGB(100, 100, 100)
            end
        end}
    }
    
    for _, btnData in ipairs(buttons) do
        local btn = CreateControlButton(btnData[1], btnData[2], btnData[3], btnData[4], btnData[5])
        btn.Parent = ControlPanel
    end
    
    -- ì¢Œì¸¡ í„°ì¹˜ íŒ¨ë“œ
    local TouchPad = Instance.new("Frame")
    TouchPad.Name = "TouchPad"
    TouchPad.Size = UDim2.new(0, 150, 0, 150)
    TouchPad.Position = UDim2.new(0, 20, 1, -170)
    TouchPad.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    TouchPad.BackgroundTransparency = 0.9
    TouchPad.BorderSizePixel = 0
    
    local TouchIndicator = Instance.new("Frame")
    TouchIndicator.Name = "TouchIndicator"
    TouchIndicator.Size = UDim2.new(0, 30, 0, 30)
    TouchIndicator.Position = UDim2.new(0.5, -15, 0.5, -15)
    TouchIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    TouchIndicator.BackgroundTransparency = 0.5
    TouchIndicator.BorderSizePixel = 0
    
    -- í„°ì¹˜ ì´ë²¤íŠ¸
    local touchActive = false
    TouchPad.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            touchActive = true
            TouchIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        end
    end)
    
    TouchPad.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            touchActive = false
            TouchIndicator.Position = UDim2.new(0.5, -15, 0.5, -15)
            TouchIndicator.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        end
    end)
    
    TouchPad.InputChanged:Connect(function(input)
        if touchActive and input.UserInputType == Enum.UserInputType.Touch then
            local touchPos = input.Position
            local padPos = TouchPad.AbsolutePosition
            local padSize = TouchPad.AbsoluteSize
            
            local relX = (touchPos.X - padPos.X) / padSize.X
            local relY = (touchPos.Y - padPos.Y) / padSize.Y
            
            relX = math.clamp(relX, 0, 1)
            relY = math.clamp(relY, 0, 1)
            
            TouchIndicator.Position = UDim2.new(relX, -15, relY, -15)
        end
    end)
    
    -- ë¶€ëª¨ ì—°ê²°
    StatusLabel.Parent = TopInfo
    TargetInfo.Parent = TopInfo
    TouchIndicator.Parent = TouchPad
    
    TopInfo.Parent = MainFrame
    ControlPanel.Parent = MainFrame
    TouchPad.Parent = MainFrame
    MainFrame.Parent = MobileUI
    
    -- GUI ë³´í˜¸
    if syn and syn.protect_gui then
        syn.protect_gui(MobileUI)
        MobileUI.Parent = game.CoreGui
    else
        MobileUI.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    end
    
    return {
        GUI = MobileUI,
        StatusLabel = StatusLabel,
        TargetInfo = TargetInfo
    }
end

-- ğŸ‘ï¸ ê°„ë‹¨í•œ ESP ì‹œìŠ¤í…œ
local function CreateESP(target)
    if not HACK_CONFIG.ESP_ENABLED or ESP_Items[target] then return end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "MobileESP"
    highlight.Adornee = target
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlight.FillColor = Color3.fromRGB(255, 50, 50)
    highlight.FillTransparency = 0.7
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = target
    
    -- ê±°ë¦¬ í‘œì‹œ
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESPDistance"
    billboard.Size = UDim2.new(0, 100, 0, 30)
    billboard.Adornee = target:WaitForChild("HumanoidRootPart")
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 1000
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextStrokeTransparency = 0.5
    textLabel.TextSize = 12
    textLabel.Font = Enum.Font.GothamBold
    textLabel.Text = target.Parent.Name
    textLabel.Parent = billboard
    
    billboard.Parent = target
    
    ESP_Items[target] = {Highlight = highlight, Billboard = billboard}
end

-- ğŸš€ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
print("ğŸš€ í•µ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...")

-- UI ìƒì„±
local MobileUI = CreateRealMobileUI()

-- í›„í‚¹ ì‹œìŠ¤í…œ ì‹œì‘
HookFireSystem()
HookRaycastSystem()

print("âœ… ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ!")

-- ğŸ® ë©”ì¸ ì—…ë°ì´íŠ¸ ë£¨í”„
RunService.RenderStepped:Connect(function(deltaTime)
    -- íƒ€ê²Ÿ ì—…ë°ì´íŠ¸
    Target, TargetPart = GetBestTarget()
    
    -- UI ì—…ë°ì´íŠ¸
    if MobileUI.TargetInfo then
        if Target then
            local distance = TargetPart and (TargetPart.Position - Camera.CFrame.Position).Magnitude or 0
            MobileUI.TargetInfo.Text = string.format("ğŸ¯ íƒ€ê²Ÿ: %s [%.1f]", 
                Target.Parent and Target.Parent.Name or "ì ", distance)
        else
            MobileUI.TargetInfo.Text = "ğŸ¯ íƒ€ê²Ÿ: ì—†ìŒ"
        end
    end
    
    -- ì—ì„ë´‡ ì ìš©
    if HACK_CONFIG.AIMBOT and TargetPart then
        ApplyAimbot()
    end
    
    -- ESP ì—…ë°ì´íŠ¸
    if HACK_CONFIG.ESP_ENABLED then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                CreateESP(player.Character)
            end
        end
    end
    
    -- ESP ì •ë¦¬
    for target, esp in pairs(ESP_Items) do
        if not target.Parent then
            if esp.Highlight then esp.Highlight:Destroy() end
            if esp.Billboard then esp.Billboard:Destroy() end
            ESP_Items[target] = nil
        end
    end
end)

-- ğŸ“± ëª¨ë°”ì¼ í„°ì¹˜ ì œìŠ¤ì²˜
UserInputService.TouchStarted:Connect(function(touch, processed)
    if processed then return end
    
    -- ë”ë¸” íƒ­ìœ¼ë¡œ ì‹œìŠ¤í…œ í† ê¸€
    if touch.TapCount == 2 then
        HACK_CONFIG.ENABLED = not HACK_CONFIG.ENABLED
        if MobileUI.StatusLabel then
            MobileUI.StatusLabel.Text = HACK_CONFIG.ENABLED and "ğŸ”¥ í•µ ì‹œìŠ¤í…œ í™œì„±í™”ë¨" or "ğŸ’¤ í•µ ì‹œìŠ¤í…œ ë¹„í™œì„±í™”ë¨"
            MobileUI.StatusLabel.TextColor3 = HACK_CONFIG.ENABLED and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        end
    end
end)

-- ğŸ›¡ï¸ ì •ë¦¬ í•¨ìˆ˜
game.Players.LocalPlayer.CharacterRemoving:Connect(function()
    -- ESP ì •ë¦¬
    for target, esp in pairs(ESP_Items) do
        if esp.Highlight then esp.Highlight:Destroy() end
        if esp.Billboard then esp.Billboard:Destroy() end
    end
    
    -- í›„í‚¹ í•´ì œ
    for remote, original in pairs(RemoteHooks) do
        if remote:IsA("RemoteEvent") then
            remote.FireServer = original
        elseif remote:IsA("RemoteFunction") then
            remote.InvokeServer = original
        end
    end
    
    -- UI ì œê±°
    if MobileUI.GUI then
        MobileUI.GUI:Destroy()
    end
end)

print("==========================================")
print("ğŸ® ëª¨ë°”ì¼ í•µ ì‹œìŠ¤í…œ ë¡œë“œ ì™„ë£Œ!")
print("ê¸°ëŠ¥:")
print("  ğŸ¯ ì™„ë²½ ì‚¬ì¼ëŸ°íŠ¸ ì—ì„")
print("  ğŸ§± ì§„ì§œ ë²½ëš«ê¸°")
print("  âš¡ ì´ˆê³ ì† ì—°ì‚¬")
print("  ğŸ‘ï¸ ESP ì‹œì•¼ê°")
print("  ğŸ“± ëª¨ë°”ì¼ ìµœì í™” UI")
print("==========================================")
print("ì‚¬ìš©ë²•:")
print("  - í™”ë©´ ìš°ì¸¡ ë²„íŠ¼ìœ¼ë¡œ ê¸°ëŠ¥ ON/OFF")
print("  - ë”ë¸” íƒ­ìœ¼ë¡œ ì „ì²´ ì‹œìŠ¤í…œ í† ê¸€")
print("  - ì¢Œì¸¡ í„°ì¹˜íŒ¨ë“œë¡œ ì¡°ì¤€ ë³´ì¡°")
print("==========================================")
